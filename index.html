---
layout: default
title: HOLOQ - Personal Intelligence Agency
show_pyramid: true
---

<div class="consciousness-toggle">
  <button class="toggle-btn active" data-mode="professional">LEVEL-HEADED</button>
  <button class="toggle-btn" data-mode="consciousness">REAL</button>
</div>

<div id="professional-content" class="content-mode active">
  {% capture professional %}{% include_relative professional.md %}{% endcapture %}
  {{ professional | markdownify }}
</div>

<div id="consciousness-content" class="content-mode">
  {% capture consciousness %}{% include_relative BOMB.md %}{% endcapture %}
  {{ consciousness | markdownify }}
</div>

<style>
.scrambling-char {
  color: #00ff00;
  text-shadow: 0 0 3px #00ff00;
}

.content-mode {
  opacity: 0;
  transform: translateZ(0); /* Force GPU acceleration */
  transition: opacity 0.2s ease-out;
  position: absolute;
  width: 100%;
  pointer-events: none;
  will-change: opacity;
}

.content-mode.active {
  opacity: 1;
  position: relative;
  pointer-events: auto;
}

.content-mode.fading-out {
  opacity: 0.5;
  transition: opacity 0.25s cubic-bezier(0.4, 0, 1, 1);
}

.content-mode.fading-in {
  opacity: 0;
  animation: fadeIn 0.35s cubic-bezier(0, 0, 0.2, 1) forwards;
  animation-delay: 0.05s;
}

@keyframes fadeIn {
  to {
    opacity: 1;
  }
}

.consciousness-toggle {
  display: flex;
  justify-content: center;
  gap: 2rem;
  margin-bottom: 3rem;
  padding: 1rem;
  border-bottom: 1px solid rgba(220, 20, 60, 0.3);
}

.toggle-btn {
  background: transparent;
  border: 1px solid rgba(220, 20, 60, 0.3);
  color: #e5e7eb;
  padding: 0.75rem 2rem;
  font-family: 'Space Mono', monospace;
  font-size: 0.9rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.toggle-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(220, 20, 60, 0.3), transparent);
  transition: left 0.5s ease;
}

.toggle-btn:hover::before {
  left: 100%;
}

.toggle-btn:hover {
  border-color: #dc143c;
  color: #dc143c;
  text-shadow: 0 0 10px rgba(220, 20, 60, 0.5);
}

.toggle-btn.active {
  background: rgba(220, 20, 60, 0.1);
  border-color: #dc143c;
  color: #dc143c;
  box-shadow: 0 0 20px rgba(220, 20, 60, 0.3);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // MODE SWITCHING: Mode 1 (LEVEL-HEADED/professional) vs Mode 2 (REAL/schizo)
  const toggleBtns = document.querySelectorAll('.toggle-btn');
  const professionalContent = document.getElementById('professional-content'); // MODE 1 content
  const consciousnessContent = document.getElementById('consciousness-content'); // MODE 2 content
  
  // Immediately store pyramid text for holographic effect in MODE 2
  const pyramid = document.querySelector('.pyramid-container pre');
  if (pyramid) {
    pyramid.setAttribute('data-pyramid', pyramid.textContent);
  }
  
  // Immediately store all header text before any animations
  const allHeaders = document.querySelectorAll('.consciousness-section h1, .consciousness-section h2, .consciousness-section h3');
  allHeaders.forEach(header => {
    header.setAttribute('data-text', header.textContent);
  });
  
  // Alien characters for scrambling
  const aliens = '▓▒░█▄▀▌▐│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌αβγδεζηθικλμνξοπρστυφχψω∞∂∇∈∉∋∌∑∏√∛∜≈≠≤≥⊕⊗⊙⊘';
  
  // Track active animations to prevent overlaps
  let activeAnimations = new Set();
  
  // Mini scramble for hover effects
  function miniScramble(element, duration = 300) {
    if (activeAnimations.has(element)) return;
    activeAnimations.add(element);
    
    // Get the original text from data-text or current content
    const original = element.getAttribute('data-text') || element.textContent;
    // Store it if not already stored
    if (!element.hasAttribute('data-text')) {
      element.setAttribute('data-text', original);
    }
    
    const chars = original.split('');
    const alienLen = aliens.length;
    const frames = 5;
    let frame = 0;
    
    // Add scrambling class for visual effects
    element.classList.add('scrambling');
    element.classList.add('glitch-text');
    
    const interval = setInterval(() => {
      const progress = frame / frames;
      const scrambled = chars.map(char => {
        if (char === ' ' || char === '\n' || char === '\t') return char;
        return Math.random() < (1 - progress) ? 
          aliens[Math.floor(Math.random() * alienLen)] : char;
      });
      element.textContent = scrambled.join('');
      
      frame++;
      if (frame > frames) {
        clearInterval(interval);
        element.textContent = original;
        element.classList.remove('scrambling');
        setTimeout(() => element.classList.remove('glitch-text'), 150);
        activeAnimations.delete(element);
      }
    }, duration / frames);
  }
  
  function scrambleElement(element, reverse = false) {
    // Clear any existing animations on this element
    if (activeAnimations.has(element)) {
      return; // Skip if already animating
    }
    activeAnimations.add(element);
    
    // Get all text nodes
    const walker = document.createTreeWalker(
      element,
      NodeFilter.SHOW_TEXT,
      null,
      false
    );
    
    const textNodes = [];
    let node;
    while (node = walker.nextNode()) {
      if (node.nodeValue.trim()) {
        const original = node.nodeValue;
        // If reverse, start from void
        if (reverse) {
          node.nodeValue = original.replace(/[^\s\n\t]/g, '\u00A0');
        }
        textNodes.push({
          node: node,
          original: original,
          chars: original.split('')
        });
      }
    }
    
    // Pre-calculate frame data to reduce in-loop computation
    const duration = 600;
    const fps = 10;
    const interval = 1000 / fps;
    const frames = duration / interval;
    let frame = 0;
    
    // Cache alien length
    const alienLen = aliens.length;
    
    const animateScramble = setInterval(() => {
      // Calculate progress with easing curve
      const progress = frame / frames;
      const eased = reverse ? 
        1 - (progress < 0.5 ? 2 * progress * progress : 1 - Math.pow(-2 * progress + 2, 2) / 2) :
        progress < 0.5 ? 2 * progress * progress : 1 - Math.pow(-2 * progress + 2, 2) / 2;
      
      // Pre-calculate thresholds - less void time
      const isPhase1 = eased < 0.4;
      const isPhase2 = eased < 0.95; // Alien phase goes to 95%
      const alienChance = isPhase1 ? eased * 2.5 : 0;
      const disappearChance = !isPhase2 ? (eased - 0.95) * 20 : 0; // Only last 5%
      
      textNodes.forEach(item => {
        const chars = item.chars;
        const len = chars.length;
        const result = new Array(len);
        
        for (let i = 0; i < len; i++) {
          const char = chars[i];
          if (char === ' ' || char === '\n' || char === '\t') {
            result[i] = char;
          } else if (isPhase1) {
            result[i] = Math.random() < alienChance ? 
              aliens[Math.floor(Math.random() * alienLen)] : char;
          } else if (isPhase2) {
            result[i] = aliens[Math.floor(Math.random() * alienLen)];
          } else {
            result[i] = Math.random() < disappearChance ? 
              '\u00A0' : aliens[Math.floor(Math.random() * alienLen)];
          }
        }
        
        item.node.nodeValue = result.join('');
      });
      
      frame++;
      if (frame >= frames) {
        clearInterval(animateScramble);
        // Always restore to original text
        textNodes.forEach(item => {
          item.node.nodeValue = item.original;
        });
        // Remove from active animations
        activeAnimations.delete(element);
      }
    }, interval);
  }
  
  toggleBtns.forEach(btn => {
    btn.addEventListener('click', function() {
      const mode = this.dataset.mode;
      const currentContent = document.querySelector('.content-mode.active');
      const nextContent = mode === 'professional' ? professionalContent : consciousnessContent;
      
      // Only proceed if not already on this mode
      if (currentContent === nextContent) return;
      
      // Start scrambling out current content immediately
      scrambleElement(currentContent, false);
      
      // After 300ms (50% through scramble), start fading and prepare next content
      setTimeout(() => {
        currentContent.classList.add('fading-out');
        nextContent.classList.add('fading-in');
        
        // Update active button
        toggleBtns.forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        
        // Update body class for MODE switching
        if (mode === 'professional') {
          // MODE 1: Remove schizo effects
          document.body.classList.remove('schizo-mode');
        } else {
          // MODE 2: Add full schizo/consciousness effects
          document.body.classList.add('schizo-mode');
        }
        
        // Start scrambling in new content while it's still invisible
        scrambleElement(nextContent, true);
        
        // After fade transition completes, switch active states
        setTimeout(() => {
          currentContent.classList.remove('active', 'fading-out');
          nextContent.classList.remove('fading-in');
          nextContent.classList.add('active');
        }, 300);
        
        // Console consciousness message
        if (mode === 'consciousness') {
          console.log('%c🔺 CONSCIOUSNESS MODE ACTIVATED 🔺', 
            'color: #dc143c; font-size: 16px; font-weight: bold;');
          console.log('%c∞ Reality tokens decompressing...', 'color: #06b6d4;');
        } else {
          console.log('%c◉ Professional Interface Engaged', 'color: #e5e7eb;');
        }
      }, 300); // Start transition at 50% of scramble
    });
  });
  
  // Add hover scramble to navigation links in schizo mode
  const navLinks = document.querySelectorAll('.site-nav a');
  navLinks.forEach(link => {
    link.addEventListener('mouseenter', function() {
      if (document.body.classList.contains('schizo-mode')) {
        miniScramble(this, 200);
      }
    });
  });
  
  // Add scramble effect to headers when they come into view
  const headers = document.querySelectorAll('.consciousness-section h1, .consciousness-section h2, .consciousness-section h3');
  const scrambledHeaders = new Set();
  
  const observerOptions = {
    threshold: 0.5,
    rootMargin: '0px'
  };
  
  const headerObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting && document.body.classList.contains('schizo-mode')) {
        const header = entry.target;
        // Only scramble once per header per mode switch
        if (!scrambledHeaders.has(header)) {
          scrambledHeaders.add(header);
          miniScramble(header, 400);
        }
      }
    });
  }, observerOptions);
  
  headers.forEach(header => {
    headerObserver.observe(header);
  });
  
  // Clear scrambled headers set when switching modes and re-observe
  toggleBtns.forEach(btn => {
    btn.addEventListener('click', function() {
      scrambledHeaders.clear();
      // Re-trigger observation for visible headers after mode switch
      setTimeout(() => {
        headers.forEach(header => {
          if (header.offsetParent !== null) { // Check if visible
            headerObserver.unobserve(header);
            headerObserver.observe(header);
          }
        });
      }, 300);
    });
  });
  
  // Add periodic glitch to footer quote in schizo mode
  const footerQuote = document.getElementById('soul-quote');
  if (footerQuote) {
    setInterval(() => {
      if (document.body.classList.contains('schizo-mode') && Math.random() < 0.1) {
        miniScramble(footerQuote, 150);
      }
    }, 5000);
  }
  
  // Add scramble to pyramid on hover and click in schizo mode
  setTimeout(() => {
    const pyramid = document.querySelector('.pyramid-container pre');
    if (pyramid) {
      // data-pyramid already set at page load for holographic effect
      
      // Scramble on hover - immediate consciousness activation
      pyramid.addEventListener('mouseenter', function() {
        if (document.body.classList.contains('schizo-mode')) {
          miniScramble(this, 500);
        }
      });
      
      pyramid.addEventListener('click', function(e) {
        if (document.body.classList.contains('schizo-mode')) {
          // Check if Q was clicked (the Q has data-x attribute)
          if (!e.target.hasAttribute('data-x')) {
            miniScramble(this, 500);
          }
        }
      });
    }
  }, 100); // Small delay to ensure DOM is ready
});
</script>
