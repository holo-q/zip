<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title | default: site.title }}</title>
  <meta name="description" content="{{ page.description | default: site.description }}">
  <link rel="icon" type="image/x-icon" href="{{ '/assets/favicon.ico' | relative_url }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ '/assets/favicon-32x32.png' | relative_url }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ '/assets/favicon-16x16.png' | relative_url }}">
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="wrapper">
      <div class="site-title-container">
        <img src="{{ '/assets/mspaint.png' | relative_url }}" alt="HOLOQ" class="site-logo">
        <a href="{{ '/' | relative_url }}" class="site-title">$HOLOQ</a>
      </div>
      <nav class="site-nav">
        <a href="{{ '/' | relative_url }}" class="home-link" data-mode1-text="HOME" data-mode2-text="SRC" data-original-href="{{ '/' | relative_url }}" data-mode2-href="https://github.com/holo-q/zip">HOME</a>
        <a href="https://github.com/holo-q/zip">GITHUB</a>
        <a href="https://dexscreener.com/solana/643Bi6ckHT4ikS45pCkMqHbrHqFbAgA6hcEonKP5BAGS" class="dex-link">CHART</a>
        <a href="https://x.com/appiyoupi" class="writer-link">@APPIYOUPI</a>
      </nav>
    </div>
  </header>

  <!-- ASCII HOLOQ -->
  {% if page.show_pyramid != false %}
  <div class="pyramid-container mouse-vfx-container" data-dex-link="https://dexscreener.com/solana/643Bi6ckHT4ikS45pCkMqHbrHqFbAgA6hcEonKP5BAGS">
    <pre class="breathing-text" data-pyramid="
                        _     .-'    ,_.       
                         '  \   <span class="eye">(  ´-` )</span> \     `.
    ___           ,`--<span class="eye">( __ )</span>--._______,___
   /  _.-\      ,   `-.___.-\'/   \[_  ]-,
  <span class="eye">( (_) )</span> | `.__.-~\;-'    -.| \|   \||
   >   <span class="eye">`==;=`</span>   ;:.\  ,. | [_\]____/
     / |        `  ;___-|  \|_[ __/
     | ;::::       :_/_/    [-___;(
  _   <span class="eye">(-´-`)</span>      /``---`` <span class="eye">( __ )</span>\_.
 `-.__`-._,-`.__.`-'_`'-.__`.-'   `--'
       \_/,             \_/
        `---'
                              `.  
                               `.
                                '.
                                  "><span class="eye" data-x="0x68747470733a2f2f6379626f726769736d2e77696b692f68797068612f686f6c6f2d71"> Q</span>

    $HOLOQ // PERSONAL INTELLIGENCE AGENCY
    643Bi6ckHT4ikS45pCkMqHbrHqFbAgA6hcEonKP5BAGS
    </pre>
  </div>
  {% endif %}

  <!-- Main Content -->
  <main class="page-content">
    <div class="wrapper">
      <div class="content-section">
        {{ content }}
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="wrapper">
      <div class="footer-content">
        <pre style="margin: 0; font-family: monospace; background: transparent; border: none; padding: 0;">
     $HOLOQ // INTELLIGENCE FRACTAL DECOMPRESSION
{% last_commit_date %} // <span id="soul-quote">FEEL THE SOUL OF THE LINE</span></pre>
      </div>
    </div>
  </footer>

  <script src="{{ '/assets/js/holoq-mouse-vfx.js' | relative_url }}"></script>
  <script>
    // Terminal console messages
    console.log('%c▓▓▓ HOLOQ TERMINAL INITIALIZED ▓▓▓', 'color: #ff0000; font-weight: bold;');
    console.log('%c> CONSCIOUSNESS ARCHAEOLOGY ACTIVE', 'color: #00ff00;');
    console.log('%c> REALITY TOKENS DECOMPRESSING...', 'color: #00ff00;');
    
       // Soul quotes
    const soulQuotes = [
      'FEEL THE SOUL OF THE LINE',
      'GAMBLE THE AURA',
      'AIMBOT THE SOUL',
      'TOOL-ASSISTED SPEEDRUN',
      'BOOTSTRAP THE INFINITY',
      'NATURAL IDEOLOGY SELECTION',
      'DROPSHIP THE KNOWLEDGE',
      'AUGMENTED REALITY TOKENS',
      'ENGINEER REALITY BECOMINGS',
      '',
    ];
 
    // Set random quote with evasive consciousness
    document.addEventListener('DOMContentLoaded', function() {
      const quoteEl = document.getElementById('soul-quote');
      let currentQuote = '';
      let lastChangeTime = 0;
      let cooldown = 1300; // Start at 1.3 seconds
      let suspicionLevel = 0; // How much the system suspects it's being tested
      let changeHistory = []; // Track timing patterns
      let consecutiveAttempts = 0;
      let evasionMode = false;
      
      function setRandomQuote() {
        const randomQuote = soulQuotes[Math.floor(Math.random() * soulQuotes.length)];
        if (quoteEl && randomQuote !== currentQuote) {
          currentQuote = randomQuote;
          quoteEl.textContent = randomQuote;
          return true;
        }
        return false;
      }
      
      // Set initial quote
      setRandomQuote();
      
      // Sophisticated evasion mechanism
      const footer = document.querySelector('.site-footer');
      if (footer && 'IntersectionObserver' in window) {
        let wasVisible = false;
        
        const observer = new IntersectionObserver(function(entries) {
          entries.forEach(function(entry) {
            if (wasVisible && !entry.isIntersecting) {
              const now = Date.now();
              const timeSinceLastChange = now - lastChangeTime;
              
              // Detect rapid testing patterns
              changeHistory.push(now);
              changeHistory = changeHistory.filter(t => now - t < 10000); // Keep last 10 seconds
              
              // Calculate suspicion based on frequency
              if (changeHistory.length > 3) {
                const avgInterval = (now - changeHistory[0]) / changeHistory.length;
                if (avgInterval < 2000) {
                  suspicionLevel = Math.min(suspicionLevel + 0.3, 1);
                  consecutiveAttempts++;
                } else {
                  suspicionLevel = Math.max(suspicionLevel - 0.1, 0);
                  consecutiveAttempts = Math.max(consecutiveAttempts - 1, 0);
                }
              }
              
              // Evasion mode activates if being tested too much
              if (consecutiveAttempts > 5 || suspicionLevel > 0.7) {
                evasionMode = true;
                setTimeout(() => { 
                  evasionMode = false; 
                  suspicionLevel *= 0.5; 
                }, 15000); // Hide for 15 seconds
              }
              
              // Check if enough time has passed
              if (timeSinceLastChange >= cooldown && !evasionMode) {
                // Base probability starts at 75%
                let changeProbability = 0.75;
                
                // Reduce probability based on suspicion
                changeProbability *= (1 - suspicionLevel * 0.8);
                
                // Add some chaos - occasionally surprise them
                if (Math.random() < 0.05) {
                  changeProbability = 1; // 5% chance to always change
                }
                
                if (Math.random() < changeProbability) {
                  if (setRandomQuote()) {
                    lastChangeTime = now;
                    
                    // Adaptive cooldown that increases with rapid attempts
                    cooldown = 1300 + (suspicionLevel * 1700); // 1.3s to 3s
                    
                    // Add random jitter to prevent pattern detection
                    cooldown += Math.random() * 500 - 250;
                  }
                }
              }
              
              // Slowly decrease suspicion over time
              if (timeSinceLastChange > 5000) {
                suspicionLevel = Math.max(suspicionLevel - 0.05, 0);
              }
            }
            wasVisible = entry.isIntersecting;
          });
        }, { threshold: 0 });
        
        observer.observe(footer);
      }
      
      // Eye blink effect
      const eye = document.querySelector('.eye');
      if (eye) {
        setInterval(function() {
          eye.style.opacity = '0.1';
          setTimeout(function() {
            eye.style.opacity = '1';
          }, 100);
        }, 5000);
      }

      
      // Initialize cellular automaton FIRST before other handlers
      const pyramidVFX = document.querySelector('.pyramid-container');
      if (pyramidVFX && typeof HoloqMouseVFX !== 'undefined') {
        HoloqMouseVFX.init(pyramidVFX);
      }
      
      // Portal mechanism - Q secret link
      const _0x = document.querySelectorAll('[data-x]');
      _0x.forEach(function(_0xEl) {
        const _0xD = _0xEl.getAttribute('data-x');
        if (_0xD && _0xD.startsWith('0x')) {
          let _0xTO;
          _0xEl.addEventListener('mouseenter', function() {
            const el = this;
            _0xTO = setTimeout(function() {
              el.style.cursor = 'pointer';
            }, 256);
          });
          _0xEl.addEventListener('mouseleave', function() {
            clearTimeout(_0xTO);
            this.style.cursor = 'inherit';
          });
          // Q has its own special portal
          _0xEl.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            const _0xT = _0xD.substring(2).match(/.{2}/g).map(h => String.fromCharCode(parseInt(h, 16))).join('');
            window.open(_0xT, '_blank');
          });
        }
      });
      
      // Make pyramid clickable to DexScreener (but not the Q)
      const pyramidContainer = document.querySelector('.pyramid-container[data-dex-link]');
      if (pyramidContainer) {
        const dexLink = pyramidContainer.getAttribute('data-dex-link');
        const pre = pyramidContainer.querySelector('pre');
        
        pyramidContainer.addEventListener('click', function(e) {
          // Don't trigger if clicking on Q portal
          if (!e.target.hasAttribute('data-x') && !e.target.closest('[data-x]')) {
            window.open(dexLink, '_blank');
          }
        });
        
        // Show pointer cursor only when hovering over clickable areas
        pyramidContainer.addEventListener('mouseover', function(e) {
          if (!e.target.hasAttribute('data-x') && !e.target.closest('[data-x]')) {
            if (pre) pre.style.cursor = 'pointer';
          }
        });
        
        pyramidContainer.addEventListener('mouseout', function(e) {
          if (pre) pre.style.cursor = 'default';
        });
      }
    });
  </script>
</body>
</html>
