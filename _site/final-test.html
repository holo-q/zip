<!DOCTYPE html>
<html>
<head>
    <title>FINAL DEX/WRITER TEST</title>
    <link rel="stylesheet" href="/assets/css/main.css">
    <script src="/assets/js/holoq-vfx.js"></script>
    <script src="/assets/js/holoq-init.js"></script>
    <style>
        .test-info {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #111;
            border: 2px solid #0f0;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            color: #0f0;
            z-index: 1000;
        }
        .test-info h3 { color: #f0f; margin-bottom: 10px; }
        .test-info div { margin: 5px 0; }
        .pass { color: #0f0; }
        .fail { color: #f00; }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="wrapper">
            <div class="site-title-container">
                <h1 class="site-title">HOLOQ</h1>
            </div>
            <nav class="site-nav">
                <a href="/">HOME</a>
                <a href="https://dexscreener.com/solana/holoq" class="dex-link">CHART</a>
                <a href="https://x.com/ryunuck" class="writer-link">@RYUNUCK</a>
                <a href="/holoq-archive">ARCHIVE</a>
            </nav>
        </div>
    </header>
    
    <main class="page-content">
        <div class="consciousness-toggle">
            <button class="toggle-btn active" data-mode="professional">LEVEL-HEADED</button>
            <button class="toggle-btn" data-mode="consciousness">REAL</button>
        </div>
        
        <div id="professional-content" class="content-mode active">
            <div class="consciousness-section">
                <h1>MODE 1: PROFESSIONAL</h1>
                <p>In this mode, navigation should show "CHART" and "@RYUNUCK"</p>
            </div>
        </div>
        
        <div id="consciousness-content" class="content-mode">
            <div class="consciousness-section">
                <h1 data-text="MODE 2: SCHIZO/REAL">MODE 2: SCHIZO/REAL</h1>
                <p>In this mode, navigation should show "DEX" and "WRITER" with scrambling animation</p>
            </div>
        </div>
    </main>
    
    <div class="test-info">
        <h3>TEST STATUS</h3>
        <div id="mode-status">Mode: PROFESSIONAL</div>
        <div id="body-class">Body class: (none)</div>
        <div id="dex-status">DEX link text: -</div>
        <div id="writer-status">WRITER link text: -</div>
        <div id="test-result">Result: TESTING...</div>
    </div>
    
    <script>
        function updateTestInfo() {
            const modeStatus = document.getElementById('mode-status');
            const bodyClass = document.getElementById('body-class');
            const dexStatus = document.getElementById('dex-status');
            const writerStatus = document.getElementById('writer-status');
            const testResult = document.getElementById('test-result');
            
            const isSchizo = document.body.classList.contains('schizo-mode');
            const dexLink = document.querySelector('.dex-link');
            const writerLink = document.querySelector('.writer-link');
            
            modeStatus.textContent = `Mode: ${isSchizo ? 'SCHIZO/REAL' : 'PROFESSIONAL'}`;
            bodyClass.textContent = `Body class: ${document.body.className || '(none)'}`;
            
            if (dexLink) {
                const dexText = dexLink.textContent;
                const dexAfter = window.getComputedStyle(dexLink, '::after').content;
                dexStatus.textContent = `DEX link: text="${dexText}" ::after=${dexAfter}`;
            }
            
            if (writerLink) {
                const writerText = writerLink.textContent;
                const writerAfter = window.getComputedStyle(writerLink, '::after').content;
                writerStatus.textContent = `WRITER link: text="${writerText}" ::after=${writerAfter}`;
            }
            
            // Check if test passes
            if (isSchizo) {
                const dexWorks = dexLink && dexLink.textContent === '' && 
                                window.getComputedStyle(dexLink, '::after').content.includes('DEX');
                const writerWorks = writerLink && writerLink.textContent === '' && 
                                   window.getComputedStyle(writerLink, '::after').content.includes('WRITER');
                
                if (dexWorks && writerWorks) {
                    testResult.innerHTML = '<span class="pass">✓ TEST PASSED - DEX/WRITER WORKING!</span>';
                } else {
                    testResult.innerHTML = '<span class="fail">✗ TEST FAILED - Links not transforming</span>';
                }
            } else {
                const chartWorks = dexLink && dexLink.textContent === 'CHART';
                const ryunuckWorks = writerLink && writerLink.textContent === '@RYUNUCK';
                
                if (chartWorks && ryunuckWorks) {
                    testResult.innerHTML = '<span class="pass">✓ MODE 1 OK - Showing CHART/@RYUNUCK</span>';
                } else {
                    testResult.innerHTML = '<span class="fail">✗ MODE 1 ISSUE</span>';
                }
            }
        }
        
        // Monitor mode changes
        const observer = new MutationObserver(updateTestInfo);
        observer.observe(document.body, { attributes: true, attributeFilter: ['class'] });
        
        // Monitor link changes
        document.querySelectorAll('.dex-link, .writer-link').forEach(link => {
            observer.observe(link, { childList: true, characterData: true, subtree: true });
        });
        
        // Initial update
        setTimeout(updateTestInfo, 500);
        
        // Update on button clicks
        document.querySelectorAll('.toggle-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                setTimeout(updateTestInfo, 600);
            });
        });
    </script>
</body>
</html>